(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{131:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setAutentificated",(function(){return E})),n.d(a,"makeLogin",(function(){return U})),n.d(a,"makeLogout",(function(){return C})),n.d(a,"setUsersList",(function(){return T})),n.d(a,"setUsersMails",(function(){return N})),n.d(a,"deleteUser",(function(){return A})),n.d(a,"blockUser",(function(){return I}));var r=n(6),c=n(0),s=n.n(c),i=n(12),o=n.n(i),u=(n(131),n(54)),l=n(20),d=n(19),b=n.n(d),j=n(26),p=n(31),h=n(22),O=n(8),m=n(183),f=n(185),g=n(140),x=n(113),v=n(58),k=n(62),S=function(){var e=Object(c.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(O.a)(r,2),i=s[0],o=s[1];return{loading:n,request:Object(c.useCallback)(function(){var e=Object(j.a)(b.a.mark((function e(t){var n,r,c,s,i,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",r=u.length>2&&void 0!==u[2]?u[2]:null,c=u.length>3&&void 0!==u[3]?u[3]:{},a(!0),e.prev=4,r&&(r=JSON.stringify(r),c["Content-Type"]="application/json"),e.next=8,fetch(t,{body:r,method:n,headers:c});case 8:return s=e.sent,e.next=11,s.json();case 11:if(i=e.sent,s.ok){e.next=14;break}throw new Error(i.message||"Somthing error");case 14:return a(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(4),a(!1),o(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(c.useCallback)((function(){return o(null)}),[])}},w=function(){return Object(c.useCallback)((function(e){e&&alert(e)}),[])},y=n(39),L=n(28),E=function(e){return{type:"SET_AUTENTIFICATED",payload:e}},U=function(e){return{type:"LOGIN",payload:e}},C=function(e){return{type:"LOGOUT",payload:e}},T=function(e){return{type:"SET_USERS_LIST",payload:e}},N=function(e){return{type:"SET_USERS_MAILS",payload:e}},A=function(e){return{type:"DELETE_USER",payload:e}},I=function(e){return{type:"BLOCK_USER",payload:e}},B=Object(k.a)((function(e){return{paper:{marginTop:10,display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:1},submit:{marginTop:5,height:50}}})),D=Object(y.b)((function(e){return{curentUser:e.curentUser}}),(function(e){return{makeLogin:Object(L.a)(a,e).makeLogin}}))((function(e){var t=e.curentUser,n=e.makeLogin,a=B(),s=S(),i=s.error,o=s.request,u=s.clearError,l=Object(c.useState)({}),d=Object(O.a)(l,2),k=d[0],y=d[1],L=w();Object(c.useEffect)((function(){L(i),u()}),[i,L,u]);var E=function(e){return y(Object(h.a)(Object(h.a)({},k),{},Object(p.a)({},e.target.name,e.target.value)))},U=Object(c.useCallback)(Object(j.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,console.log(Object(h.a)({},k));case 3:return e.next=5,o("api/auth/login","POST",Object(h.a)({},k));case 5:return a=e.sent,e.next=8,n(Object(h.a)({},a));case 8:t.login(a.token,a.id),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])}))),[n,o,k]);return Object(r.jsxs)(m.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(f.a,{}),Object(r.jsxs)("div",{className:a.paper,children:[Object(r.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(r.jsxs)("form",{className:a.form,noValidate:!0,children:[Object(r.jsx)(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:E}),Object(r.jsx)(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:E}),Object(r.jsx)(v.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:U,children:"Log in"})]})]})]})})),_=n(146),M=n(101),P=n(79),R=n.n(P),q=n(80),F=n.n(q),G=n(103),W=n.n(G),z=[{field:"name",headerName:"Name",width:150},{field:"email",headerName:"Email",width:250},{field:"status",headerName:"Status",width:230,renderCell:function(e){return e.value?"Online":"Offline"}},{field:"isBlocked",headerName:"Is blocked",width:230,renderCell:function(e){return e.value?Object(r.jsx)(R.a,{}):Object(r.jsx)(F.a,{})}},{field:"regDate",headerName:"Registration date",width:230},{field:"lastLoginDate",headerName:"Last login date",width:230}],J=Object(_.a)((function(e){return{logoutbtn:{width:200,margin:5},toolbtn:{width:200,margin:5}}})),K=Object(y.b)((function(e){return{token:e.curentUser.token,curentUser:e.curentUser,email:e.curentUser.id,users:e.usersList,usersMails:e.tools}}),(function(e){var t=Object(L.a)(a,e);return{makeLogout:t.makeLogout,setUsersList:t.setUsersList,setUsersMails:t.setUsersMails}}))((function(e){var t=e.makeLogout,n=(e.email,e.token),a=e.setUsersList,s=e.users,i=e.usersMails,o=e.setUsersMails,u=J(),l=S().request,d=Object(c.useCallback)(function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t.rowIds);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]),p=Object(c.useCallback)(Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.next=5,l("api/auth/logout","POST",{token:n},{Authorization:"Bearer ".concat(n)});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[l,t,n]),O=Object(c.useCallback)(Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("/api/usersList","GET",null,{Authorization:"Bearer ".concat(n)});case 3:return t=e.sent,e.next=6,a(t);case 6:return e.abrupt("return",t);case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,p();case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[n,l,a,p]),m=Object(c.useCallback)(Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("api/usersList/blockUser","POST",{usersMails:i},{Authorization:"Bearer ".concat(n)});case 3:return e.t0=a,e.next=6,l("/api/usersList","GET",null,{Authorization:"Bearer ".concat(n)});case 6:return e.t1=e.sent,e.next=9,(0,e.t0)(e.t1);case 9:e.next=15;break;case 11:return e.prev=11,e.t2=e.catch(0),e.next=15,p();case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),[l,a,i,n,p]),f=Object(c.useCallback)(Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("api/usersList/unlockUser","POST",{usersMails:i},{Authorization:"Bearer ".concat(n)});case 3:return e.t0=a,e.next=6,l("/api/usersList","GET",null,{Authorization:"Bearer ".concat(n)});case 6:return e.t1=e.sent,e.next=9,(0,e.t0)(e.t1);case 9:e.next=15;break;case 11:return e.prev=11,e.t2=e.catch(0),e.next=15,p();case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),[l,a,i,n,p]),g=Object(c.useCallback)(Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("/api/usersList/deleteUser","POST",{usersMails:i},{Authorization:"Bearer ".concat(n)});case 3:return e.t0=a,e.next=6,l("/api/usersList","GET",null,{Authorization:"Bearer ".concat(n)});case 6:return e.t1=e.sent,e.next=9,(0,e.t0)(e.t1);case 9:e.next=15;break;case 11:return e.prev=11,e.t2=e.catch(0),e.next=15,p();case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),[l,a,i,n,p]);return Object(c.useEffect)((function(){console.log(JSON.parse(localStorage.getItem("userData"))),O()}),[O]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{style:{height:600,width:"100%"},children:Object(r.jsx)(M.a,{rows:s.map((function(e,t){return Object(h.a)(Object(h.a)({},e),{},{id:t+1})})),columns:z,checkboxSelection:!0,onSelectionChange:d})}),Object(r.jsx)(v.a,{className:u.toolbtn,variant:"contained",color:"primary",onClick:m,children:Object(r.jsx)(R.a,{})}),Object(r.jsx)(v.a,{className:u.toolbtn,variant:"outlined",color:"primary",onClick:f,children:Object(r.jsx)(F.a,{})}),Object(r.jsx)(v.a,{className:u.toolbtn,variant:"contained",color:"secondary",onClick:g,children:Object(r.jsx)(W.a,{})}),Object(r.jsx)(v.a,{className:u.logoutbtn,variant:"contained",color:"secondary",onClick:p,children:"Log out"})]})})),V=Object(_.a)((function(e){return{paper:{marginTop:10,display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:1},submit:{marginTop:5,height:50}}})),H=function(){var e=S(),t=e.error,n=e.request,a=e.clearError,s=Object(c.useState)(),i=Object(O.a)(s,2),o=i[0],u=i[1],l=w();Object(c.useEffect)((function(){l(t),a()}),[t,l,a]);var d=Object(c.useCallback)(Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(Object(h.a)({},o)),e.next=4,n("/api/auth/registrations","POST",Object(h.a)({},o));case 4:t=e.sent,l(t.message),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[l,o,n]),k=function(e){return u(Object(h.a)(Object(h.a)({},o),{},Object(p.a)({},e.target.name,e.target.value)))},y=V();return Object(r.jsxs)(m.a,{component:"main",maxWidth:"xs",children:[Object(r.jsx)(f.a,{}),Object(r.jsxs)("div",{className:y.paper,children:[Object(r.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(r.jsxs)("form",{className:y.form,noValidate:!0,children:[Object(r.jsx)(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoFocus:!0,onChange:k}),Object(r.jsx)(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:k}),Object(r.jsx)(x.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:k}),Object(r.jsx)(v.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:y.submit,onClick:d,children:"Sign Up"})]})]})]})},Q=Object(k.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},btn:{margin:3,height:50,width:300},container:{minHeight:"100vh",padding:"0 0.5rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}})),X=function(){var e=Q();return Object(r.jsxs)("div",{className:e.container,children:[Object(r.jsx)(u.b,{to:"/login",children:Object(r.jsx)(v.a,{className:e.btn,color:"primary",variant:"contained",children:"Login"})}),Object(r.jsx)(u.b,{to:"/registration",children:Object(r.jsx)(v.a,{className:e.btn,color:"primary",variant:"contained",children:"Sign up"})})]})};var Y=Object(y.b)((function(e){return{curentUser:e.curentUser}}),(function(e){var t=Object(L.a)(a,e);return{setAutentificated:t.setAutentificated,makeLogin:t.makeLogin}}))((function(e){var t=e.curentUser,n=(e.setAutentificated,e.makeLogin);Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&n(e)}),[n]);var a=!!t.token?Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/Admin",children:Object(r.jsx)(K,{})}),Object(r.jsx)(l.b,{path:"/",children:Object(r.jsx)(l.a,{to:"/Admin"})}),Object(r.jsx)(l.a,{to:"/Admin"})]}):Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/Login",children:Object(r.jsx)(D,{})}),Object(r.jsx)(l.b,{path:"/Registration",children:Object(r.jsx)(H,{})}),Object(r.jsx)(l.b,{path:"/",children:Object(r.jsx)(X,{})}),Object(r.jsx)(l.a,{to:"/"})]});return Object(r.jsx)(u.a,{children:Object(r.jsx)("div",{className:"App",children:a})})})),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,189)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},$={userId:null,token:null,login:function(){},logout:function(){},isAuthentificated:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var n=t.payload,a=n.token,r=n.id;return localStorage.setItem("userData",JSON.stringify({token:a,userId:r})),Object(h.a)(Object(h.a)({},e),{},{token:a,userId:r,isAuthentificated:!!a});case"LOGOUT":return localStorage.setItem("userData",JSON.stringify({userId:null,token:null})),Object(h.a)(Object(h.a)({},e),{},{userId:null,token:null});default:return e}},te=n(17),ne=[],ae=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_USERS_LIST":return(e=console).log.apply(e,Object(te.a)(n.payload)),Object(te.a)(n.payload);default:return t}},re=[],ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS_MAILS":return console.log(t.payload),Object(te.a)(t.payload);case"DELETE_USER":case"BLOCK_USER":return Object(te.a)(t.payload);default:return e}},se=Object(L.b)({curentUser:ee,usersList:ae,tools:ce}),ie=Object(L.c)(se);o.a.render(Object(r.jsx)(y.a,{store:ie,children:Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[138,1,2]]]);
//# sourceMappingURL=main.342a4718.chunk.js.map